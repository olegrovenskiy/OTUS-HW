
@page "/room_navigation/{ID:int}"
@inject SiteDataService objDataService
@using TspuWebPortal.Data
@using TspuWebPortal.Shared

<h3>Площадка @ChosenRoom.DataCenterId. Редактирование данных помещения ЦОДа.</h3>



<EditForm Model=@ChosenRoom OnSubmit=@FormSubmitted>
  <div class="row">
    <div class = "col-2">
        <label for="RoomName">Название помещения</label>
        <InputText @bind-Value=ChosenRoom.RoomName class="form-control" id="FederalDistrict"  Size="20" />
    </div>
    <div class = "col-4">
        <label for="RoomCoordinates">Координаты помещения</label>
        <InputText @bind-Value=ChosenRoom.RoomCoordinates class="form-control" id="MaintainanceStatus" />
    </div>
  </div>
  <br>
<input type="submit" class="btn btn-primary" value="Сохранить"/>
</EditForm>





@code {
        [Parameter]
        public int ID { get; set; }

        RoomData ChosenRoom = new RoomData ();
        protected override async Task OnInitializedAsync()
        {
            ChosenRoom = await Task.Run(() => objDataService.GetRoomInfoById(Convert.ToInt32(ID)));
        }

        void FormSubmitted(EditContext editContext)
        {
            bool formIsValid = editContext.Validate();
            if (formIsValid) objDataService.UpdateRoomInfo(ChosenRoom);
        }        
    }