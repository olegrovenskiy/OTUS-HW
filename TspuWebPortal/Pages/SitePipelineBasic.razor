
@page "/sites/{ID:int}/basic"
@inject SiteDataService objDataService
@using TspuWebPortal.Data
@using TspuWebPortal.Shared

<h3>Площадка @ChosenSite.ID. Общая информация.</h3>



<EditForm Model=@ChosenSite OnSubmit=@FormSubmitted>
  <div class="row">
    <div class = "col-2">
        <label for="FederalDistrict">Федеральный Округ</label>
        <InputText @bind-Value=ChosenSite.FederalDistrict class="form-control" id="FederalDistrict"  Size="20" />
    </div>
    <div class = "col-2">
        <label for="MaintainanceStatus">Операционный статус</label>
        <InputText @bind-Value=ChosenSite.MaintainanceStatus class="form-control" id="MaintainanceStatus" />
    </div>
    <div class = "col-3">
        <label for="PipelineStage">Этап конвейера</label>
        <InputText @bind-Value=ChosenSite.PipelineStage class="form-control" id="PipelineStage" />
    </div>
  </div>
  <br>
<input type="submit" class="btn btn-primary" value="Save"/>
</EditForm>





@code {


        [Parameter]
        public int ID { get; set; }

        SiteData ChosenSite = new SiteData ();
        protected override async Task OnInitializedAsync()
        {
            ChosenSite = await Task.Run(() => objDataService.GetSiteInfoById(Convert.ToInt32(ID)));
        }

        void FormSubmitted(EditContext editContext)
        {
            bool formIsValid = editContext.Validate();
            if (formIsValid) objDataService.UpdateSiteInfo(ChosenSite);
        }        

    }

